네이버에서 검색창에 검색어를 입력하면 페이지 전환 없이 입력한 검색어와 유사한 검색어를
그 아래에 보여줍니다.
이러한 UI를 HTMX를 통해서도 손쉽게 페이지 전환 없이 인플레이스 검색을 구현할 수
있습니다. 검색어를 입력받는 인풋 요소가 있고요.
HTMX를 통해 요청을 보낼 것이기에 폼 태그는 필요 없습니다.
검색어는 쿼리 이름으로 전달할 것이고요.
GET 요청을 보낼 것입니다.
HX 트리거 속성에는 키 업 설정과 함께 표현식을 지정하실 수 있습니다.
키 입력 시에 현재 인풋 요소의 값의 길이가 0이거나 2 이상이고 값이 변경되었고
400ms의 딜레이를 가지고 HTMX 요청이 트리거됩니다.
검색어가 없을 때에 대한 처리는 서버에서 판단합니다 검색어가 없으니 빈 문자열로 검색할 수
없음 응답을 할 수도 있겠고요 검색어가 없으니 모든 태그 목록을 응답으로 내어주도록 구현할
수도 있겠습니다.
htmx에서는 단지 요청만 할 뿐이고요 그에 대한 처리는 모두 서버에서 결정합니다.
실습해 볼게요.
블로그의 태그 리스트 뷰에서는 쿼리 이름에 쿼리 파라메타를 통한 검색 기능이 이미 구현되어
있습니다. 그러니 클라이언트 쪽만 구현하면 되겠네요.
블로그의 태그 리스트 점 HTML 템플릿에 부트스트랩 5 스타일의 인풋 태그를 하나
추가합니다. 태그 리스트 뷰에서는 쿼리 이름의 인자를 검색어로 처리하니까 input 태그의
name 속성을 쿼디로 지정하고요.
검색 주소로 태그 목록 주소를 지정하고요.
브라우저 캐싱되지 않도록 hx-get-with-timestamp 속성도 추가해줍니다.
hx 트리거 조건으로 입력 값이 변경되었고 400ms의 딜레이를 가지고 입력 값의 길이가
0이거나 2글자 이상일 때에만 htmx 요청이 발생하도록 조건을 지정합니다.
검색 요청에 대한 응답은 위 새로고침 버튼과 동일하게 태그 리스트 컨테이너의 리스트 그룹을
지정합니다. hx swap 속성도 새로고침 버튼과 동일하게 설정해 주겠습니다.
페이지 새로고침하시고 검색어를 2글자 이상 입력하시면 검색어에 맞게 검색내역이 실시간으로
변경됨을 확인하실 수 있고요.
검색어를 모두 지우시면 입력값의 길이가 0이잖아요.
이때에도 서버로 검색어 없이 요청이 전달되고요.
태그 리스트 뷰에서는 검색어가 없으면 모든 태그 목록을 응답하도록 구현되어 있죠.