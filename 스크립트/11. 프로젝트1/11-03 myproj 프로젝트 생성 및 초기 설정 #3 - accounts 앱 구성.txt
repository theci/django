인증을 위한 Accounts 앱을 생성하고 커스텀 유저 모델을 등록해 주겠습니다
Accounts 앱 앱을 생성하고요 Installed Apps List에도 등록하고 Accounts의 urls.py 파일도 생성하고 프로젝트의 urls.py에도 include 포함시켜 줍니다
현장고 프로젝트에서 커스텀 유저를 아직 만드실 계획이 없으시더라도 프로젝트 생성 직후에 커스텀 유저 클래스를 꼭 생성해 주세요.
나중에 Auth 앱의 유저 모델을 바라보고 있는 코드와 데이터베이스를 Accounts 앱의 유저 모델을 바라보도록 변경하는 것은 손이 많이 갑니다.
미리 처음부터 커스텀 유저 모델을 만드시고 프로젝트에서 이를 바라보도록 설정해 주세요.
그럼 커스텀 유저의 필드들이 필요할 때 이 유저 모델 클래스만 변경하시면 됩니다.
AppSec to User 추상화 클래스를 상속받는 User 클래스를 정의하고요.
Settings 설정에 AUTH_USER 모델 설정을 재정의해서 Accounts 앱의 User 모델을 사용하도록 설정합니다.
그리고 Accounts 앱에 대한 마이그레이션 파일도 생성합니다.
이제 커스텀 유저 모델 등록 과정이 끝났고요.
마이그레이트 명령으로 데이터베이스에 적용해 보시면 기존 마이그레이션 적용이 Auth 앱의의 유저 모델을 바라보고 있는데 Accounts 앱으로 변경했기 때문에 예외가 발생하고 있습니다.
프로젝트 시작 단계이기에 데이터베이스를 삭제하고 다시 마이그레이트 명령으로 데이터베이스 테이블을 생성해 주겠습니다.
슈퍼 유저 생성해 주시고요.
개발 서버 구동해 주시면 프로젝트 초기 설정 과정 끝입니다.