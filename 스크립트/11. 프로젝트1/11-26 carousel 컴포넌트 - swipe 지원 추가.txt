노트 디테일 페이지를 아이폰 화면으로 열어봤습니다.
첫 번째 이미지에서 아무리 옆으로 스와이프를 해봐도 이미지가 다음으로 넘어가지 않습니다.
그런데 다음 버튼을 터치해서 다음 이미지로 넘어간 다음에는 이제 스와이프로 이미지를 넘길 수 있습니다.
이처럼 터치 디바이스에 대해서는 Bootstrap에서 스와이프를 지원합니다만 터치 디바이스가 아닌 마우스 환경에서는 스와이프를 지원하지 않습니다.
그런데 첫 번째 이미지에 대해서는 스와이프가 동작하지 않고 두 번째 이미지부터 스와이프가 동작하는 부분은 부트스트랩 공식 문서에서 그 답을 찾을 수 있습니다.
부트스트랩 공식 문서에서는 성능 이슈로, 캐러셀은 자바스크립트를 통해 수동으로 초기화가 필요하다고 합니다.
수동 초기화를 하지 않으면 터치 스와이프 이벤트가 제대로 동작하지 않는다고 하네요.
자바스크립트로 캐러셀을 수동으로 초기화해 주겠습니다.
캐러셀 자바스크립트 파일에서 캐러셀 컴포넌트 요소를 먼저 찾아야 할 텐데요.
Query Selector를 쓰시면 HTMX를 통해 캐럿셀 응답을 받은 경우에는 그 요소에 대해서 반응할 수 없으니 앞서 구현한 ObserveNodeInsertion 함수를 활용합니다. 
이 함수 활용을 위해 캐러셀 컴포넌트의 의존성으로 먼저 추가해줍니다.
자, 이제 캐러셀 컴포넌트 요소가 탐지되면 해당 요소에 대해 수동으로 캐러셀 초기화를 수행합니다. 
이 한 줄만으로 기본 옵션으로 캐로셀 초기화가 수행된 것이고요.
두 번째 인자로 커스텀 옵션을 지정하실 수 있습니다.
iPhone에서 새로고침하시고 동작을 확인해 보시면 첫 번째 이미지부터 스와이프가 잘 동작합니다. 
이제 마우스 환경에서도 스와이프를 지원해 보겠습니다.
캐러셀 자바스크립트 객체에서는 next 메서드를 통해 다음 이미지로 넘길 수 있고요. 
previous 메서드를 통해 이전 이미지로 넘길 수 있습니다.
그럼 이 메서드를 언제 호출해야 할까요?
carousel 요소에 대해 mousedown 이벤트와 mouseUp 이벤트를 처리할 것이고요. 
캐롤셀 컴포넌트 위에서 마우스를 눌렀을 때의 마우스 X, Y 좌표와 마우스를 떼었을 때의 X, Y 좌표를 받아서 X축의 변화량이 Y축의 변화량보다 클 경우, 
즉 마우스를 좌우로 스와이프 했을 경우에 이를 스와이프 액션으로 판단하겠습니다.
시작 X좌표가 끝 X좌표보다 작다면 다음 이미지로 넘어가도록 하고요.
시작 X 좌표가 끝 X좌표보다 크다면 이전 이미지로 넘어가도록 합니다.
페이지 새로고침하시고 마우스로 스와이프를 해보시면 스와이프가 반대로 동작하고 있네요.
Previous, Next 메서드 호출을 서로 바꾸시고요.
다시 동작을 확인해 보시면 잘 동작합니다.
마지막으로 이미지 비율이 다 달라서 캐롯의 모양이 들쑥날쑥한데요.
레티오 스타일을 통해 이미지를 1대1 비율로 조정해서 보여주겠습니다.